---
import { Icon } from "astro-icon/components";

const { icon, url, color = 'base' } = Astro.props;

// Explicit color mapping to ensure all classes are visible to Tailwind during build
const COLOR_MAP = {
  base: {
    bg: 'bg-base-100',
    ring: 'ring-base-300',
    hoverBg: 'hover:bg-base-200',
    hoverRing: 'hover:ring-base-content/20',
    text: 'text-base-content/70',
    hoverText: 'group-hover:text-base-content'
  },
  primary: {
    bg: 'bg-primary-100',
    ring: 'ring-primary-300',
    hoverBg: 'hover:bg-primary-200',
    hoverRing: 'hover:ring-primary',
    text: 'text-primary',
    hoverText: 'group-hover:text-primary-content'
  },
  secondary: {
    bg: 'bg-secondary-100',
    ring: 'ring-secondary-300',
    hoverBg: 'hover:bg-secondary-200',
    hoverRing: 'hover:ring-secondary',
    text: 'text-secondary',
    hoverText: 'group-hover:text-secondary-content'
  },
  accent: {
    bg: 'bg-accent-100',
    ring: 'ring-accent-300',
    hoverBg: 'hover:bg-accent-200',
    hoverRing: 'hover:ring-accent',
    text: 'text-accent',
    hoverText: 'group-hover:text-accent-content'
  },
  neutral: {
    bg: 'bg-neutral-100',
    ring: 'ring-neutral-300',
    hoverBg: 'hover:bg-neutral-200',
    hoverRing: 'hover:ring-neutral',
    text: 'text-neutral',
    hoverText: 'group-hover:text-neutral-content'
  },
  info: {
    bg: 'bg-info-100',
    ring: 'ring-info-300',
    hoverBg: 'hover:bg-info-200',
    hoverRing: 'hover:ring-info',
    text: 'text-info',
    hoverText: 'group-hover:text-info-content'
  },
  success: {
    bg: 'bg-success-100',
    ring: 'ring-success-300',
    hoverBg: 'hover:bg-success-200',
    hoverRing: 'hover:ring-success',
    text: 'text-success',
    hoverText: 'group-hover:text-success-content'
  },
  warning: {
    bg: 'bg-warning-100',
    ring: 'ring-warning-300',
    hoverBg: 'hover:bg-warning-200',
    hoverRing: 'hover:ring-warning',
    text: 'text-warning',
    hoverText: 'group-hover:text-warning-content'
  },
  error: {
    bg: 'bg-error-100',
    ring: 'ring-error-300',
    hoverBg: 'hover:bg-error-200',
    hoverRing: 'hover:ring-error',
    text: 'text-error',
    hoverText: 'group-hover:text-error-content'
  }
} as const;

// Get color classes with fallback to base
const colors = COLOR_MAP[color as keyof typeof COLOR_MAP] || COLOR_MAP.base;

const linkClasses = `group block rounded-full p-3 ring-2 transition-colors ${colors.bg} ${colors.ring} ${colors.hoverBg} ${colors.hoverRing}`;
const iconClasses = `size-6 transition-colors ${colors.text} ${colors.hoverText}`;

---

<li>
  <a
    href={url}
    aria-label={icon}
    class={linkClasses}
  >
    <Icon
      name={icon}
      class={iconClasses}
    />
  </a>
</li>

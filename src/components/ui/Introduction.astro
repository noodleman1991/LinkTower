---
import { Image } from "astro:assets";

import { SITE } from "@/siteConfig";
import IconLink from "@/components/ui/IconLink.astro";

const roundProfilePicture = SITE.roundProfilePicture !== false;

// Dynamic import for profile image from assets folder
const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/*.{jpg,jpeg,png,gif,webp}');
const profileImagePath = `/src/assets/${SITE.profilePicture.replace(/^\//, '')}`;
const profileImage = images[profileImagePath] ? (await images[profileImagePath]()).default : SITE.profilePicture;
---

<div class="md:mt-8 mt-4 md:py-4 py-2">
  <div class="flex gap-12 md:gap-16 items-center">
    <!-- First column: Profile image (1/3 width) -->
    <div class="w-1/3 flex items-center justify-center">
      <div class={`flex items-center justify-center max-w-[180px] max-h-[180px] ${roundProfilePicture ? 'rounded-full overflow-hidden' : ''}`}>
        <Image
          src={profileImage}
          alt={SITE.name}
          height={256}
          width={256}
          loading="eager"
          draggable="false"
          class="max-w-[180px] max-h-[180px] w-auto h-auto object-cover"
        />
      </div>
    </div>

    <!-- Second column: Name, bio, iconLinks (2/3 width) -->
    <div class="w-2/3 flex items-center justify-center">
      <div class="w-fit flex flex-col items-start text-start">
        <h1 class="text-4xl mb-4 font-semibold font-secular">{SITE.name}</h1>
        <p
          class="text-md text-lightModeForegroundMuted dark:text-darkModeForegroundMuted mt-1 whitespace-pre-line"
        >
          {SITE.bio}
        </p>
        <ul
          class="flex flex-wrap gap-2 md:gap-4 pt-2 sm:pt-4 md:pt-6"
          data-testid="icon-links-container"
        >
          {
            SITE.iconLinks.map((link) => (
              <IconLink url={link.url} icon={link.icon} color={link.color} />
            ))
          }
        </ul>
      </div>
    </div>
  </div>
  <hr class="mt-6 border-t-2 border-base-content/20" />
</div>
